name: Release Name Generator
on:
  workflow_dispatch:
jobs:
  getVersion:
    runs-on: ubuntu-latest
    outputs:
      output1: ${{ steps.nameOUT.outputs.genname }}
    steps:
    - uses: actions/checkout@master
    - name: Get Mod Version Number
      id: mod_version
      uses:  ashley-taylor/read-json-property-action@v1.2
      with:
        path: ModConfig.json
        property: ModVersion
    - name: echo ModVersion
      run: echo ${{ steps.mod_version.outputs.value }}
    - name: Get Mod ID
      id: mod_id
      uses:  ashley-taylor/read-json-property-action@v1.2
      with:
        path: ModConfig.json
        property: ModId
    - name: echo ModId
      run: echo ${{ steps.mod_id.outputs.value }}
    - name: Concatenate strings with separator
      id: zip_namer
      # You may pin to the exact commit or the version.
      # uses: michpohl/action-concatenate-strings@595fbe6538a309ac7f4c6afbc5c11b9d6e724ef8
      uses: michpohl/action-concatenate-strings@v1.0.1
      with:
        # Your first string
        first: ${{ steps.mod_id.outputs.value }}
        # Your second string
        second: ${{ steps.mod_version.outputs.value }}
        # A string to put between the first and second provided strings
        separator: '-'
        # The name of the output env var
        output-var-name: ZIP_NAME
    - name: echoZipName
      id: nameOUT
      run: 
        echo ${{ genname = env.ZIP_NAME }} >> "$GITHUB_OUTPUT"
  
  buildZip:
      runs-on: ubuntu-latest
      needs: getVersion
      steps:
      - uses: actions/checkout@master
      - name: Zip Release
        # You may pin to the exact commit or the version.
        # uses: TheDoctor0/zip-release@b57d897cb5d60cb78b51a507f63fa184cfe35554
        uses: TheDoctor0/zip-release@0.7.6
        with:
          # Filename for archive
          filename: ${{ env.ZIP_NAME }}.zip # default is release.zip
          # Base path for archive files
                
